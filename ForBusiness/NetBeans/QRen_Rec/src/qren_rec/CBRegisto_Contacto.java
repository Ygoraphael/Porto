package fme;

import java.util.Vector;



















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































class CBRegisto_Contacto
  extends CBRegisto
{
  Frame_IdProm_1 P01;
  
  public String getPagina()
  {
    return "IdProm_1";
  }
  

  int tab_index = 0;
  
  CBRegisto_Contacto() {
    P01 = ((Frame_IdProm_1)fmeApp.Paginas.getPage("IdProm_1"));
    if (P01 == null) return;
    initialize();
  }
  
  CBRegisto_Contacto(Frame_IdProm_1 p, int idx) {
    P01 = p;
    tab_index = idx;
    initialize();
  }
  
  void initialize() {
    tag = "Contacto";
    started = true;
    P01.cbd_contacto = this;
    
    CHCampo_Opt opt_c = new CHCampo_Opt("contacto", this);
    opt_c.setOptions("S", "N");
    opt_c.addComponent(P01.getJCheckBox_CSim());
    opt_c.addComponent(P01.getJCheckBox_CNao());
    dummy = P01.jCheckBox_CContactoClear;
    Campos.add(opt_c);
    
    Campos.add(new CHCampo_Text("morada", P01.getJTextField_CMorada(), null));
    Campos.add(new CHCampo_Text("localidade", P01.getJTextField_CLocalidade(), null));
    Campos.add(new CHCampo_Text("cod_postal", P01.getJTextField_CCodPostal(), CFLib.VLD_COD_POSTAL));
    Campos.add(new CHCampo_Text("cod_postal_loc", P01.getJTextField_CCodPostalLocal(), null));
    Campos.add(new CHCampo_Combo("distrito", "Distritos", P01.getJComboBox_CDistrito(), this));
    Campos.add(new CHCampo_Combo("concelho", "ConcelhosF2", P01.getJComboBox_CConcelho(), this));
    Campos.add(new CHCampo_Text("telefone", P01.getJTextField_CTelefone(), null));
    Campos.add(new CHCampo_Text("telefax", P01.getJTextField_CTelefax(), null));
    Campos.add(new CHCampo_Text("email", P01.getJTextField_CEmail(), CFLib.VLD_EMAIL));
    Campos.add(new CHCampo_Text("url", P01.getJTextField_CUrl(), null));
  }
  
  void on_update(String tag)
  {
    if (tag.equals("concelho")) {
      String concelho = getByName("concelho").getStringValue();
      

      if (concelho.length() > 0) {
        getByName("distrito").setStringValue(concelho.substring(0, 2));
      }
    }
    if (tag.equals("distrito")) {
      String distrito = getByName("distrito").getStringValue();
      String concelho = getByName("concelho").getStringValue();
      

      if (distrito.length() == 0) {
        getByName("concelho").setStringValue("");
        CTabelaF2 t1 = CTabelas.ConcelhosF2;
        t1.clear_filter();
        t1._populateComboBox(P01.getJComboBox_CConcelho());
      }
      else if ((concelho.length() == 0) || (!distrito.equals(concelho.substring(0, 2)))) {
        CTabelaF2 t1 = CTabelas.ConcelhosF2;
        t1.set_filter(3, distrito);
        t1._populateComboBox(P01.getJComboBox_CConcelho());
      }
    }
  }
  
  String on_xml(String tag)
  {
    String s = "";
    if (tag.equals("concelho")) {
      String c = getByName(tag).getStringValue();
      
      if (c.length() == 0) {
        s = s + "<concelho_d/>\n";
      } else
        s = s + _lib.xml_encode("concelho_d", CTabelas.Concelhos.getDesign(c));
    }
    if (tag.equals("distrito")) {
      String d = getByName(tag).getStringValue();
      
      if (d.length() == 0) {
        s = s + "<distrito_d/>\n";
      } else {
        s = s + _lib.xml_encode("distrito_d", CTabelas.Distritos.getDesign(d));
      }
    }
    return s;
  }
  
  CHValid_Grp validar(CHValid_Grp err_list, String cp) {
    String titulo = "Contactos do Beneficiário para efeitos do projeto";
    if (cp.length() > 0) titulo = titulo + cp;
    if (err_list == null) {
      err_list = new CHValid_Grp(this, titulo);
    }
    extract();
    

    if ((getByName("contacto").isEmpty()) && (tab_index == 0)) {
      err_list.add_msg(new CHValid_Msg("contacto", 
        "Dados de contacto diferentes dos da Sede Social? - %o"));
    } else if (getByName"contacto"v.equals("S")) {
      if (getByName("morada").isEmpty())
        err_list.add_msg(new CHValid_Msg("morada", "Morada - %o"));
      if (getByName("localidade").isEmpty())
        err_list.add_msg(new CHValid_Msg("localidade", "Localidade - %o"));
      if (getByName("cod_postal").isEmpty())
        err_list.add_msg(new CHValid_Msg("cod_postal", "Código Postal - %o"));
      if (getByName("cod_postal_loc").isEmpty())
        err_list.add_msg(new CHValid_Msg("cod_postal_loc", 
          "Código Postal (localidade) - %o"));
      if (getByName("distrito").isEmpty())
        err_list.add_msg(new CHValid_Msg("distrito", "Distrito - %o"));
      if (getByName("concelho").isEmpty())
        err_list.add_msg(new CHValid_Msg("concelho", "Concelho - %o"));
      if (getByName("telefone").isEmpty())
        err_list.add_msg(new CHValid_Msg("telefone", "Telefone(s) - %o"));
      if (getByName("email").isEmpty())
        err_list.add_msg(new CHValid_Msg("email", "E-mail - %o"));
    } else if (getByName"contacto"v.equals("0")) {
      String s = "Neste Caso Não Preenche";
      if (!getByName("morada").isEmpty())
        err_list.add_msg(new CHValid_Msg("morada", "Morada - " + s));
      if (!getByName("localidade").isEmpty())
        err_list.add_msg(new CHValid_Msg("localidade", "Localidade - " + s));
      if (!getByName("cod_postal").isEmpty())
        err_list.add_msg(new CHValid_Msg("cod_postal", "Código Postal - " + s));
      if (!getByName("cod_postal_loc").isEmpty())
        err_list.add_msg(new CHValid_Msg("cod_postal_loc", 
          "Código Postal (localidade) - " + s));
      if (!getByName("concelho").isEmpty())
        err_list.add_msg(new CHValid_Msg("concelho", "Concelho - " + s));
      if (!getByName("telefone").isEmpty())
        err_list.add_msg(new CHValid_Msg("telefone", "Telefone(s) - " + s));
      if (!getByName("email").isEmpty())
        err_list.add_msg(new CHValid_Msg("email", "E-mail - " + s));
    }
    return err_list;
  }
}
