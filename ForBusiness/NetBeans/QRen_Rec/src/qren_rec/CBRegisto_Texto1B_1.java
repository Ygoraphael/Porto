package fme;

import java.util.Vector;
import javax.swing.JLabel;
import javax.swing.JTextArea;















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































class CBRegisto_Texto1B_1
  extends CBRegisto
{
  public String getPagina()
  {
    return tag;
  }
  
  String titulo = "";
  Frame_Texto1B_1 P;
  int tab_index = 0;
  int limite = 3000;
  
  CBRegisto_Texto1B_1(String _tag, String _titulo) {
    tag = _tag;
    P = ((Frame_Texto1B_1)fmeApp.Paginas.getPage(tag));
    if (P == null) return;
    titulo = _titulo;
    initialize();
  }
  
  CBRegisto_Texto1B_1(Frame_Texto1B_1 p, String _tag, String _titulo, int idx) { P = p;
    tag = _tag;
    tab_index = idx;
    if (P == null) return;
    titulo = _titulo;
    initialize();
  }
  
  void initialize()
  {
    started = true;
    Campos.add(new CHCampo_TextArea("texto", P.getJTextArea_Txt(), this));
  }
  
  void on_update(String tag) {
    CHCampo chc = getByName("texto");
    if ((chc instanceof CHCampo_TextArea)) {
      JTextArea jta = jcomp;
      int n = jta.getText().length();
      P.jLabel_Count.setText(limite - n + "/" + limite);
    }
  }
  
  CHValid_Grp validar(CHValid_Grp err_list, String cp) {
    String tit = titulo;
    if (cp.length() > 0) tit = tit + cp;
    if (err_list == null) {
      err_list = new CHValid_Grp(this, tit);
    }
    extract();
    String erro = "Texto demasiado extenso. Por favor, abrevie até " + limite + " caracteres.";
    

    if ((getByName("texto").isEmpty()) && (tab_index == 0) && (
      (!tag.equals("TxtJustifIncentivo")) || (DimensaogetByName"dimensao"v.equals("4")))) {
      err_list.add_msg(new CHValid_Msg("texto", "%o"));
    }
    if ((!getByName("texto").isEmpty()) && (getByName"texto"v.length() > limite)) {
      err_list.add_msg(new CHValid_Msg("texto", erro));
    }
    return err_list;
  }
  
  CHValid_Grp validar_qinv(CHValid_Grp err_list, String cp) { String tit = titulo;
    if (cp.length() > 0) tit = tit + cp;
    if (err_list == null) {
      err_list = new CHValid_Grp(this, tit);
    }
    extract();
    boolean existe = false;
    for (int i = 0; i < QInvdados.size(); i++) {
      String desp = CBData.QInv.getColValue("classe", i);
      if ((desp.length() > 0) && (desp.startsWith("50"))) {
        existe = true;
        break;
      }
    }
    if (existe) {
      String erro = "Texto demasiado extenso. Por favor, abrevie até " + limite + " caracteres.";
      if (getByName("texto").isEmpty())
        err_list.add_msg(new CHValid_Msg("texto", "%o"));
      if ((!getByName("texto").isEmpty()) && (getByName"texto"v.length() > limite))
        err_list.add_msg(new CHValid_Msg("texto", erro));
    }
    return err_list;
  }
}
