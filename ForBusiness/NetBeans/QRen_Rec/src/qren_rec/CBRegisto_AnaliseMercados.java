package fme;

import java.util.Vector;
import javax.swing.JLabel;
import javax.swing.JTextArea;








































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































class CBRegisto_AnaliseMercados
  extends CBRegisto
{
  Frame_Mercados P;
  
  public String getPagina()
  {
    return "Mercados";
  }
  

  int limite1 = 3000;
  int limite2 = 3000;
  
  CBRegisto_AnaliseMercados() {
    P = ((Frame_Mercados)fmeApp.Paginas.getPage("Mercados"));
    if (P == null) return;
    initialize();
  }
  
  void initialize() {
    tag = "AnaliseMercados";
    started = true;
    
    Campos.add(new CHCampo_TextArea("txt_descricao", P.getjTextArea_Txt(), this));
  }
  










  void Clear()
  {
    for (int i = 0; i < Campos.size(); i++) {
      ((CHCampo)Campos.elementAt(i)).clear();
    }
  }
  
  void after_open() {
    on_update("txt_descricao");
  }
  
  void on_update(String tag)
  {
    if (!tag.startsWith("txt_")) return;
    CHCampo chc = getByName(tag);
    if ((chc instanceof CHCampo_TextArea)) {
      JTextArea jta = jcomp;
      int n = jta.getText().length();
      if (tag.equals("txt_descricao")) {
        P.jLabel_Count.setText(limite1 - n + "/" + limite1);
      }
    }
  }
  
  CHValid_Grp validar_1(CHValid_Grp err_list, String cp)
  {
    String tit = "Análise do Mercado";
    if (cp.length() > 0) tit = tit + cp;
    if (err_list == null) {
      err_list = new CHValid_Grp(this, tit);
    }
    extract();
    String erro = "Texto demasiado extenso. Por favor, abrevie até " + limite1 + " caracteres.";
    
    if (getByName("txt_descricao").isEmpty())
      err_list.add_msg(new CHValid_Msg("txt_descricao", "%o"));
    if ((!getByName("txt_descricao").isEmpty()) && (getByName"txt_descricao"v.length() > limite1)) {
      err_list.add_msg(new CHValid_Msg("txt_descricao", erro));
    }
    return err_list;
  }
}
