package fme;

import java.util.Vector;
import javax.swing.JScrollPane;
import javax.swing.JTable;


































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































class CBTabela_MarcasProprias
  extends CBTabela
{
  Frame_Concorrencia P12;
  
  public String getPagina()
  {
    return "Concorrencia";
  }
  

  int tab_index = 0;
  
  CBTabela_MarcasProprias() {
    P12 = ((Frame_Concorrencia)fmeApp.Paginas.getPage("Concorrencia"));
    if (P12 == null) return;
    initialize();
  }
  
  CBTabela_MarcasProprias(Frame_Concorrencia p, int idx) {
    tab_index = idx;
    P12 = p;
    initialize();
  }
  




  void initialize()
  {
    tag = "MarcasProprias";
    
    started = true;
    
    cols = new CHTabColModel[5];
    cols[0] = new CHTabColModel("marca", "Marca", true, true, true, null);
    cols[1] = new CHTabColModel("registada", "Registada (id)", true, true, false, null);
    cols[2] = new CHTabColModel("registada_d", "Registada", false, true, true, null);
    cols[3] = new CHTabColModel("tipo_reg", "Tipo de Registo (id)", true, true, false, null);
    cols[4] = new CHTabColModel("tipo_reg_d", "Tipo de Registo", false, true, true, null);
    
    init_dados(5);
    

    init_handler(P12.getJTable_MarcasProprias());
    P12.getJTable_MarcasProprias().addKeyListener(new TableKeyListener(this));
    handler.width = P12.getJScrollPane_MarcasProprias().getWidth();
    
    handler.set_col_text(0, 0.61D, null);
    handler.set_col_comboS(2, 0.15D, null, CTabelas.SimNao, 1, 0);
    handler.set_col_comboS(4, 0.2D, null, CTabelas.TipoRegisto, 1, 0);
  }
  
  void on_update(String colname, int nRow, String v) {
    if (colname.equals("registada_d")) {
      String registada = "";
      if (v.length() > 0) registada = CTabelas.SimNao.lookup(1, v, 0);
      setColValue("registada", nRow, registada);
    }
    if (colname.equals("registada")) {
      String registada_d = "";
      if (v.length() > 0) registada_d = CTabelas.SimNao.lookup(0, v, 1);
      setColValue("registada_d", nRow, registada_d);
    }
    if (colname.equals("tipo_reg_d")) {
      String tipo_reg = "";
      if (v.length() > 0) tipo_reg = CTabelas.TipoRegisto.lookup(1, v, 0);
      setColValue("tipo_reg", nRow, tipo_reg);
    }
    if (colname.equals("tipo_reg")) {
      String tipo_reg_d = "";
      if (v.length() > 0) tipo_reg_d = CTabelas.TipoRegisto.lookup(0, v, 1);
      setColValue("tipo_reg_d", nRow, tipo_reg_d);
    }
  }
  
  String on_xml(String tag, int row, String v) {
    String s = "";
    if (tag.equals("registada"))
      s = s + _lib.xml_encode("registada_d", getColValue("registada_d", row));
    if (tag.equals("tipo_reg"))
      s = s + _lib.xml_encode("tipo_reg_d", getColValue("tipo_reg_d", row));
    return s;
  }
  

  CHValid_Grp validar(CHValid_Grp err_list, String cp)
  {
    String titulo = "Marcas PrÃ³prias";
    if (cp.length() > 0) { titulo = titulo + cp;
    }
    if (err_list == null)
      err_list = new CHValid_Grp(this, titulo);
    if (!started) { return err_list;
    }
    


    for (int i = 0; i < dados.size(); i++) {
      StringBuffer mask = new StringBuffer("R-R--");
      if (getColValue("registada", i).equals("S"))
        mask.setCharAt(getColIndex("tipo_reg_d"), 'R');
      TabError[] e = isIncompletAll(i, mask.toString());
      for (int ii = 0; (e != null) && (ii < e.length); ii++) {
        err_list.add_msg(new CHValid_Msg("incomplet", e[ii].msg("Linha %L incompleta: %T - %o")));
      }
    }
    return err_list;
  }
}
