package fme;

import java.util.Vector;




































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































class CBRegisto_Emp
  extends CBRegisto
{
  Frame_DescFisica P09;
  
  public String getPagina()
  {
    return "DescFisica";
  }
  

  CBRegisto_Emp()
  {
    tag = "DescFisicaEmp";
    P09 = ((Frame_DescFisica)fmeApp.Paginas.getPage("DescFisica"));
    if (P09 == null) return;
    started = true;
    
    Campos.add(new CHCampo_Combo("grupo_empreend", "GrupoEmpreend", P09.getJComboBox_GrupoEmp(), this));
    Campos.add(new CHCampo_Combo("empreendimento", "EmpreendimentosF1", P09.getJComboBox_Empreendimento(), this));
    Campos.add(new CHCampo_Combo("reg_constr", "RegimeConstrucao", P09.getJComboBox_Regime(), this));
  }
  
  void on_update(String tag) {
    if (tag.equals("empreendimento"))
    {
      String empreendimento = getByName("empreendimento").getStringValue();
      if (empreendimento.length() > 0) {
        getByName("grupo_empreend").setStringValue(empreendimento.substring(0, 2));
      }
    }
    if (tag.equals("grupo_empreend")) {
      String grupo_empreend = getByName("grupo_empreend").getStringValue();
      String empreendimento = getByName("empreendimento").getStringValue();
      if (grupo_empreend.length() == 0) {
        getByName("empreendimento").setStringValue("");
        CTabelaF1 t = CTabelas.EmpreendimentosF1;
        t.clear_filter();
        t._populateComboBox(P09.getJComboBox_Empreendimento());

      }
      else if ((empreendimento.length() == 0) || (!grupo_empreend.equals(empreendimento.substring(0, 2)))) {
        CTabelaF1 t = CTabelas.EmpreendimentosF1;
        t.set_filter(2, grupo_empreend);
        t._populateComboBox(P09.getJComboBox_Empreendimento());
      }
    }
  }
  
  String on_xml(String tag)
  {
    String s = "";
    if (tag.equals("grupo_empreend")) {
      String c = getByName(tag).getStringValue();
      if (c.length() == 0) {
        s = s + "<grupo_empreend_d/>\n";
      } else
        s = s + _lib.xml_encode("grupo_empreend_d", CTabelas.GrupoEmpreend.getDesign(c));
    }
    if (tag.equals("empreendimento")) {
      String c = getByName(tag).getStringValue();
      if (c.length() == 0) {
        s = s + "<empreendimento_d/>\n";
      } else
        s = s + _lib.xml_encode("empreendimento_d", CTabelas.Empreendimentos.getDesign(c));
    }
    if (tag.equals("reg_constr")) {
      String c = getByName(tag).getStringValue();
      if (c.length() == 0) {
        s = s + "<reg_constr_d/>\n";
      } else
        s = s + _lib.xml_encode("reg_constr_d", CTabelas.RegimeConstrucao.getDesign(c));
    }
    return s;
  }
  
  CHValid_Grp validar(CHValid_Grp err_list) {
    String msg = "";
    
    if (err_list == null) {
      err_list = new CHValid_Grp(this, "Descrição Física do Empreendimento");
    }
    if (getByName("grupo_empreend").isEmpty()) {
      err_list.add_msg(new CHValid_Msg("grupo_empreend", "Grupo de Empreendimento - %o"));
    }
    if (getByName("empreendimento").isEmpty()) {
      err_list.add_msg(new CHValid_Msg("empreendimento", "Empreendimento - %o"));
    }
    if (getByName("reg_constr").isEmpty()) {
      err_list.add_msg(new CHValid_Msg("reg_constr", "Regime de Construção - %o"));
    }
    return err_list;
  }
}
