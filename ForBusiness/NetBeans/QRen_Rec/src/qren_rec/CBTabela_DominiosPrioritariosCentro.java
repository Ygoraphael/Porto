package fme;

import java.util.Vector;
import javax.swing.JComboBox;
import javax.swing.JScrollPane;
import javax.swing.JTable;
























































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































class CBTabela_DominiosPrioritariosCentro
  extends CBTabela
{
  Frame_CriteriosSelecao4 P;
  JComboBox cbo_areas;
  
  public String getPagina()
  {
    return "CriteriosSelecao4";
  }
  


  CBTabela_DominiosPrioritariosCentro()
  {
    P = ((Frame_CriteriosSelecao4)fmeApp.Paginas.getPage("CriteriosSelecao4"));
    if (P == null) return;
    initialize();
  }
  
  void initialize() {
    tag = "DominiosPrioritariosCentro";
    started = true;
    force_xml = true;
    
    cols = new CHTabColModel[6];
    cols[0] = new CHTabColModel("n_ordem", "Nº", true, false, true, null);
    cols[1] = new CHTabColModel("dominio", "", true, false, false, null);
    cols[2] = new CHTabColModel("dominio_d", "Domínio Prioritário", false, true, true, null);
    cols[3] = new CHTabColModel("area", "", true, false, false, null);
    cols[4] = new CHTabColModel("area_d", "Principal Área de Atuação", false, true, true, null);
    cols[5] = new CHTabColModel("obs", "Observações", true, true, true, null);
    
    init_dados(7);
    

    init_handler(P.jTable_DominiosCentro);
    P.jTable_DominiosCentro.addKeyListener(new TableKeyListener(this));
    handler.width = P.jScrollPane_DominiosCentro.getWidth();
    
    handler.set_col_text(0, 0.05D, "C");
    handler.set_col_comboS(2, 0.3D, null, CTabelas.ENEIDominioCentro, 1, 350);
    cbo_areas = handler.set_col_comboF(4, 0.3D, null, null, 1, 550);
    handler.set_col_text(5, 0.32D, null);
  }
  

  void _filter_populate_areas(SteppedComboBox cbo_areas, int row)
  {
    String dominio = getColValue("dominio", row);
    String area = getColValue("area", row);
    
    if (dominio.length() == 0) {
      cbo_areas.removeAllItems();
    } else {
      CTabelas.ENEIAreaCentroF1.set_filter(2, dominio);
      CTabelas.ENEIAreaCentroF1._populateComboBox(cbo_areas);
    }
    if (area.length() > 0) {
      int n = CTabelas.ENEIAreaCentroF1.getIndexFromCode(area);
      if (n >= 0) cbo_areas.setSelectedIndex(n + 1);
    }
  }
  
  void on_update(String colname, int nRow, String v) {
    numerar(0);
    if (colname.equals("area_d")) {
      String area = "";
      String dominio_old = getColValue("dominio_d", nRow);
      if (v.length() > 0) {
        area = CTabelas.ENEIAreaCentroF1.lookup(1, v, 0);
        String dominio_d = CTabelas.ENEIDominioCentro.lookup(0, area.substring(0, 2), 1);
        if (!dominio_old.equals(dominio_d))
          setColValue("dominio_d", nRow, "");
      }
      setColValue("area", nRow, area);
    }
    if (colname.equals("area")) {
      String area_d = "";
      if (v.length() > 0) area_d = CTabelas.ENEIAreaCentro.lookup(0, v, 1);
      setColValue("area_d", nRow, area_d);
    }
    
    if (colname.equals("dominio_d")) {
      String dominio = "";
      String dominio_old = "";
      if (getColValue("area", nRow).length() > 0)
        dominio_old = getColValue("area", nRow).substring(0, 2);
      if (v.length() == 0) {
        on_update("area_d", nRow, "");
        setColValue("area_d", nRow, "");
      }
      else {
        dominio = CTabelas.ENEIDominioCentro.lookup(1, v, 0);
        if (!dominio_old.equals(dominio)) {
          on_update("area_d", nRow, "");
          setColValue("area_d", nRow, "");
        }
      }
      setColValue("dominio", nRow, dominio);
    }
    if (colname.equals("dominio")) {
      String dominio_d = "";
      if (v.length() > 0)
        dominio_d = CTabelas.ENEIDominioCentro.lookup(0, v, 1);
      setColValue("dominio_d", nRow, dominio_d);
      on_update("dominio_d", nRow, dominio_d);
    }
    handler.j.repaint();
  }
  
  String on_xml(String tag, int row, String v) { String s = "";
    if (tag.equals("dominio"))
      s = s + _lib.xml_encode("dominio_d", getColValue("dominio_d", row));
    if (tag.equals("area"))
      s = s + _lib.xml_encode("area_d", getColValue("area_d", row));
    return s;
  }
  
  CHValid_Grp validar(CHValid_Grp err_list) {
    if (err_list == null) {
      err_list = new CHValid_Grp(this, "D1. Domínios Prioritários - Centro");
    }
    if ((isEmpty()) && (_lib.to_double(ParamsgetByName"centro"v) > 0.0D)) {
      err_list.add_msg(new CHValid_Msg("indicador", "%o"));
    }
    for (int j = 0; j < dados.size(); j++) {
      String mask = "R-R-R-";
      TabError[] e = isIncompletAll(j, mask.toString());
      for (int ii = 0; (e != null) && (ii < e.length); ii++)
        err_list.add_msg(new CHValid_Msg("incomplet", e[ii].msg("Linha %L incompleta: %T - %o")));
    }
    return err_list;
  }
}
