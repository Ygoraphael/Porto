var jotcache={lang:[],re:/^[._a-zA-Z0-9\-]+[=]?[._a-zA-Z0-9\-]+/,resetSelect:function(a){if(a===1){document.id("filter_view").set("value","")}if(a===2){document.id("search").set("value","")}jotcache.setReset();document.adminForm.submit()},setReset:function(){if(Browser.ie){document.forms.adminForm.target=""}else{document.id("adminForm").set("target","")}document.id("form_view").set("value","reset");document.id("form_task").set("value","display")},setRecache:function(){document.id("form_view").set("value","recache");if(Browser.ie){document.forms.adminForm.target="_blank"}else{document.id("adminForm").set("target","_blank")}},submitform:function(a,b){if(a==="recache"){jotcache.setRecache()}else{jotcache.setReset()}if(typeof(b)==="undefined"){b=document.getElementById("adminForm");if(!b){b=document.adminForm}}if(typeof(a)!=="undefined"&&""!==a){b.task.value=a}if(typeof b.onsubmit==="function"){b.onsubmit()}if(typeof b.fireEvent==="function"){b.fireEvent("submit")}b.submit()},chckon:function(a){if(a.get("value")!==""){this.top=a.getParent().getParent();this.top.getElement("input[type=checkbox]").checked=true}},valoff:function(a){if(a.checked===false){this.top=a.getParent().getParent();this.top.getElements("input[name^=ex]").each(function(b,c){b.value=""})}},init:function(a){this.lang=a;this.cbset=true;$$("input[name^=ex]").each(function(b,c){this.validate(b,c);b.addEvent("click",this.clicked.bind(b,c));b.addEvent("change",this.changed.bind(b,c));this.cbox=document.id("cb"+c);this.cbox.addEvent("click",this.switched.bind(this.cbox,b))},this)},switched:function(a){if(!this.getProperty("checked")){a.setProperty("value","")}},pressed:function(){this.cbset=false;this.checked=true;$$("input[name^=ex]").each(function(a,b){if(a.get("value")!==""){if(jotcache.validate(a,b)){a.setStyle("border","red solid 2px");this.checked=false}}},this);return this.checked},changed:function(a){jotcache.clicked.attempt(a,this);this.setProperty("value",jotcache.cleared)},clicked:function(b){this.cbset=true;this.joterr=jotcache.validate(this,b);if(!this.joterr&&this.getNext()){this.getNext().destroy()}if(this.joterr){var a=new Element("div");a.appendText(jotcache.str+" ("+jotcache.lang[0]+" )");if(!this.getNext()){a.injectAfter(this)}else{this.getNext().destroy();a.injectAfter(this)}}},validate:function(a,b){this.val=document.id(a).get("value");if(this.val===""){this.cleared="";a.setStyle("border","silver solid 1px");return false}this.joterr=false;this.cleared=this.val.replace(/\s*/g,"").replace(/[:]*/g,"");this.str="";this.cleared.split(",").each(function(c){this.mtch=c.match(this.re);if(this.mtch===null){this.mtch=""}else{this.mtch=this.mtch[0]}if(!this.joterr){if(this.str!==""){this.str=this.str+","}this.str=this.str+this.mtch}if(c!==this.mtch){this.joterr=true}},this);if(this.cleared!==this.str){a.setStyle("border","red solid 2px");return true}else{a.setStyle("border","silver solid 1px");if(this.cbset){document.id("cb"+b).checked="checked"}return false}}};var jotcacheajax={timer:null,requestinfo:function(){var b=new Request({url:jotcachereq,async:true,method:"get",data:"",onRequest:function(){document.id("toolbar-start").set("styles",{opacity:"0.5"});document.id("toolbar-stop").set("styles",{opacity:"1.0"});document.id("message-here").set("text","loading...")},onSuccess:function(c){document.id("message-here").set("text",c)},onComplete:function(){},onFailure:function(c){document.id("message-here").set("text",c)}});if(Browser.chrome){b.options.async=false}var a=document.id("recache-tabs").getChildren("dt.open");b.data="plugin="+a[0].get("text");if(jotcacheflag===1){b.send(b.data)}else{b.send("flag=stop")}},again:function(){jotcacheajax.timer=jotcacheajax.requestinfo.periodical(2000)}};