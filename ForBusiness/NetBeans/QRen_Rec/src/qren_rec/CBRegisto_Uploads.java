package fme;

import java.util.HashMap;
import java.util.Vector;





































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































class CBRegisto_Uploads
  extends CBRegisto
{
  Frame_Uploads P;
  
  public String getPagina()
  {
    return "Uploads";
  }
  
  CBRegisto_Uploads()
  {
    P = ((Frame_Uploads)fmeApp.Paginas.getPage("Uploads"));
    if (P == null) return;
    initialize();
  }
  
  CBRegisto_Uploads(Frame_Uploads p1) {
    P = p1;
    initialize();
  }
  
  void initialize() {
    tag = "Uploads";
    
    String[] opt_v = { "S" };
    
    Campos.add(new CHCampo_Opt("visto", "S", this, P.getJCheckBox_Visto()));
    


    if ("01".matches(P.uploads)) {
      CHCampo_Opt opt_g_1 = new CHCampo_Opt("aplicavel_01", opt_v, this);
      opt_g_1.addComponent(P.jCheckBox_Aplicavel_1);
      dummy = P.jCheckBox_Aplicavel_1_Clear;
      Campos.add(opt_g_1);
      
      opt_g_1 = new CHCampo_Opt("upload_01", opt_v, this);
      opt_g_1.addComponent(P.jCheckBox_Upload_1);
      dummy = P.jCheckBox_Upload_1_Clear;
      Campos.add(opt_g_1);
      
      Campos.add(new CHCampo_Text("file_01", P.jTextField_FileUpld_1, null, this));
      Campos.add(new CHCampo_Text("file_srv_01", P.jTextField_FileSrvUpld_1, null, this));
    }
    

    if ("02".matches(P.uploads)) {
      CHCampo_Opt opt_g_1 = new CHCampo_Opt("aplicavel_02", opt_v, this);
      opt_g_1.addComponent(P.jCheckBox_Aplicavel_2);
      dummy = P.jCheckBox_Aplicavel_2_Clear;
      Campos.add(opt_g_1);
      
      opt_g_1 = new CHCampo_Opt("upload_02", opt_v, this);
      opt_g_1.addComponent(P.jCheckBox_Upload_2);
      dummy = P.jCheckBox_Upload_2_Clear;
      Campos.add(opt_g_1);
      
      Campos.add(new CHCampo_Text("file_02", P.jTextField_FileUpld_2, null, this));
      Campos.add(new CHCampo_Text("file_srv_02", P.jTextField_FileSrvUpld_2, null, this));
    }
    

    if ("03".matches(P.uploads)) {
      CHCampo_Opt opt_g_1 = new CHCampo_Opt("aplicavel_03", opt_v, this);
      opt_g_1.addComponent(P.jCheckBox_Aplicavel_3);
      dummy = P.jCheckBox_Aplicavel_3_Clear;
      Campos.add(opt_g_1);
      
      opt_g_1 = new CHCampo_Opt("upload_03", opt_v, this);
      opt_g_1.addComponent(P.jCheckBox_Upload_3);
      dummy = P.jCheckBox_Upload_3_Clear;
      Campos.add(opt_g_1);
      
      Campos.add(new CHCampo_Text("file_03", P.jTextField_FileUpld_3, null, this));
      Campos.add(new CHCampo_Text("file_srv_03", P.jTextField_FileSrvUpld_3, null, this));
    }
    

    if ("04".matches(P.uploads)) {
      CHCampo_Opt opt_g_1 = new CHCampo_Opt("aplicavel_04", opt_v, this);
      opt_g_1.addComponent(P.jCheckBox_Aplicavel_4);
      dummy = P.jCheckBox_Aplicavel_4_Clear;
      Campos.add(opt_g_1);
      
      opt_g_1 = new CHCampo_Opt("upload_04", opt_v, this);
      opt_g_1.addComponent(P.jCheckBox_Upload_4);
      dummy = P.jCheckBox_Upload_4_Clear;
      Campos.add(opt_g_1);
      
      Campos.add(new CHCampo_Text("file_04", P.jTextField_FileUpld_4, null, this));
      Campos.add(new CHCampo_Text("file_srv_04", P.jTextField_FileSrvUpld_4, null, this));
    }
    

    if ("05".matches(P.uploads)) {
      CHCampo_Opt opt_g_1 = new CHCampo_Opt("aplicavel_05", opt_v, this);
      opt_g_1.addComponent(P.jCheckBox_Aplicavel_5);
      dummy = P.jCheckBox_Aplicavel_5_Clear;
      Campos.add(opt_g_1);
      
      opt_g_1 = new CHCampo_Opt("upload_05", opt_v, this);
      opt_g_1.addComponent(P.jCheckBox_Upload_5);
      dummy = P.jCheckBox_Upload_5_Clear;
      Campos.add(opt_g_1);
      
      Campos.add(new CHCampo_Text("file_05", P.jTextField_FileUpld_5, null, this));
      Campos.add(new CHCampo_Text("file_srv_05", P.jTextField_FileSrvUpld_5, null, this));
    }
    

    Campos.add(new CHCampo_TextArea("observacoes", P.getJTextArea_Obs(), null));
    started = true;
  }
  
  void update_aplicaveis() {
    CBData.Decl.on_update("eleg_prom_8");
  }
  

  CHValid_Grp validar(CHValid_Grp err_list)
  {
    if (err_list == null) {
      err_list = new CHValid_Grp(this, "Documentos para Upload");
    }
    extract();
    
    if (getByName("visto").isEmpty()) {
      err_list.add_msg(new CHValid_Msg("visto", "Tomei conhecimento e declaro... - %o"));
    }
    if ((getByName("aplicavel_01") != null) && 
      (getByName"aplicavel_01"v.equals("S")) && (!getByName"upload_01"v.equals("S"))) {
      err_list.add_msg(new CHValid_Msg("upload_01", "Documento " + P.getDocN("01") + " - %o"));
    }
    if ((getByName("aplicavel_02") != null) && 
      (getByName"aplicavel_02"v.equals("S")) && (!getByName"upload_02"v.equals("S"))) {
      err_list.add_msg(new CHValid_Msg("upload_02", "Documento " + P.getDocN("02") + " - %o"));
    }
    if ((getByName("aplicavel_03") != null) && 
      (getByName"aplicavel_03"v.equals("S")) && (!getByName"upload_03"v.equals("S"))) {
      err_list.add_msg(new CHValid_Msg("upload_03", "Documento " + P.getDocN("03") + " - %o"));
    }
    if ((getByName("aplicavel_04") != null) && 
      (getByName"aplicavel_04"v.equals("S")) && (!getByName"upload_04"v.equals("S"))) {
      err_list.add_msg(new CHValid_Msg("upload_04", "Documento " + P.getDocN("04") + " - %o"));
    }
    if ((getByName("aplicavel_05") != null) && 
      (getByName"aplicavel_05"v.equals("S")) && (!getByName"upload_05"v.equals("S"))) {
      err_list.add_msg(new CHValid_Msg("upload_05", "Documento " + P.getDocN("05") + " - %o"));
    }
    if ((getByName("aplicavel_05") != null) && 
      (!getByName"upload_05"v.equals("S")) && (!CBData.Promotor.getByName("dt_inicio_act").isEmpty())) {
      int ano_cand = (int)CBData.Params.getByName("ano_cand").valueAsDouble();
      int ano = ano_cand;
      String v = PromotorgetByName"dt_inicio_act"v;
      if (v.length() == 10) {
        ano = Integer.parseInt(v.substring(0, 4));
      }
      if ((ano <= ano_cand - 1) && (CBData.Promotor.getByName("cod_ies1").isEmpty()) && (!getByName"aplicavel_05"v.equals("S"))) {
        err_list.add_msg(new CHValid_Msg("upload_05", "Documento " + P.getDocN("05") + " - %o. Não apresentou IES para o ano de " + (_lib.to_int(CParseConfig.hconfig.get("ano_cand").toString()) - 1) + ", deve fazer o upload do documento "));
      }
    }
    
    String erro = "Texto demasiado extenso. Por favor, abrevie até 32000 caracteres.";
    
    if ((!getByName("observacoes").isEmpty()) && (getByName"observacoes"v.length() > 32000)) {
      err_list.add_msg(new CHValid_Msg("observacoes", erro));
    }
    return err_list;
  }
  
  void after_open()
  {
    for (Object campo : Campos) if (((campo instanceof CHCampo)) && 
        (tag.startsWith("upload_"))) {
        on_update(tag);
      }
  }
  
  void on_update(String tag)
  {
    if (tag.startsWith("upload_")) {
      String suffix = tag.substring("upload_".length());
      
      P.update_icon(tag, getByName"aplicavel_"v, getByNamev);
    }
    if ((tag.startsWith("aplicavel_")) && (getByName(tag).isEmpty())) {
      String suffix = tag.substring("aplicavel_".length());
      getByName("file_srv_" + suffix).clear();
      getByName("file_" + suffix).clear();
      getByName("upload_" + suffix).clear();
    }
  }
  
  void limpar_registo() {
    for (Object campo : Campos) { if (((campo instanceof CHCampo)) && 
        (tag.matches("(upload|file|file_srv)_.."))) {
        ((CHCampo)campo).setStringValue("");
      }
    }
    after_open();
  }
  
  public String xmlPrintEnd() {
    String xml = super.xmlPrintEnd() + "\n";
    xml = xml + "<ListaUploads>\n";
    for (int i = 0; i < Campos.size(); i++) {
      String tag = Campos.elementAt(i)).tag;
      
      if (tag.startsWith("aplicavel_")) {
        String suffix = tag.substring(tag.lastIndexOf("_"), tag.length());
        xml = xml + "<Reg>\n";
        xml = xml + "<id>" + suffix.substring(1, suffix.length()) + "</id>\n";
        for (int j = 0; j < Campos.size(); j++) {
          String tag2 = Campos.elementAt(j)).tag;
          if (tag2.endsWith(suffix)) {
            String tag3 = tag2.substring(0, tag2.lastIndexOf("_"));
            
            xml = xml + _lib.xml_encode(tag3, getByNamev);
          }
        }
        xml = xml + "</Reg>\n";
      }
    }
    xml = xml + "</ListaUploads>\n";
    return xml;
  }
}
